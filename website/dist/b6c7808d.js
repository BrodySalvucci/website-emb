import{l as D,m as A,j as e,u as T,p as L,r as m,F as R,G as M,f as O,x as k,t as x}from"./assets/index-25a0d8c7.js";import{T as w,s as a,I as q,i as b}from"./1ed2eb02.js";import{S as B}from"./48344293.js";import{a as G}from"./d3d01167.js";import{d as z}from"./e676146e.js";var j={},F=A;Object.defineProperty(j,"__esModule",{value:!0});var E=j.default=void 0,V=F(D()),$=e,H=(0,V.default)((0,$.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");E=j.default=H;const i=30;function J(d){const o={total:d,entries:[],loading:!0};for(let l=0;l<i;l++)o.entries.push({id:l.toString(),loading:!0,category:[]});return o}const Y=({name:d,category:o,placeholder:l,showCategory:C})=>{const{t:r}=T(["theatre","commonError"]),[s,h]=L();let t=parseInt(s.get("page"));isNaN(t)&&(t=0);const[P,I]=m.useState(i*2),[N,S]=m.useState(null),c=N||J(P),f=Math.floor(c.total/i),[v,_]=m.useState(null);return m.useEffect(()=>{S(null);const u=new AbortController;return async function(){let p=!1,g;switch(s.get("sort")){case"leastPopular":p=!0;case"mostPopular":g="plays";break;case"nameASC":p=!0;case"nameDES":g="name";break}const y=new w(R,u.signal);try{const n=await y.category({category:o,sort:g,leastGreatest:p,offset:t*i,limit:i});S(n),I(n.total)}catch(n){G(n)||(console.error(n),_(String(n)))}}(),()=>u.abort()},[t,o,s,r]),v?e.jsx(M,{cause:r("theatre:error.category.fetch"),error:v,message:r("theatre:error.category.generic")}):e.jsxs("main",{className:a.main,children:[e.jsx(B,{showCategory:C,category:o,placeholder:l}),e.jsxs("section",{children:[e.jsxs("div",{className:a.name,children:[e.jsx("h1",{children:e.jsx(O,{ellipsis:!0,children:d})}),e.jsxs(k,{className:a.sort,defaultValue:s.get("sort"),onChange:u=>{s.delete("page"),h({...Object.fromEntries(s),sort:u.target.value})},children:[e.jsx("option",{value:"mostPopular",children:r("theatre:mostPopular")}),e.jsx("option",{value:"leastPopular",children:r("theatre:leastPopular")}),e.jsx("option",{value:"nameASC",children:r("theatre:nameASC")}),e.jsx("option",{value:"nameDES",children:r("theatre:nameDES")})]})]}),e.jsx(q,{className:a.items,items:c.entries})]}),e.jsxs("div",{className:x(a.pages,f===0&&a.useless),children:[e.jsx(z,{className:x(a.button,!t&&a.disabled),onClick:()=>{!b(c)&&t&&h({...Object.fromEntries(s),page:Math.max(t-1,0).toString()})}}),e.jsx(E,{className:x(a.button,t>=f&&a.disabled),onClick:()=>{!b(c)&&t<f&&h({...Object.fromEntries(s),page:(t+1).toString()})}})]})]})};export{Y as C};
//# sourceMappingURL=b6c7808d.js.map
