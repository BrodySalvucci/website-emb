{"version":3,"file":"e0d2c6e9.js","sources":["../../node_modules/@mui/icons-material/ArrowForward.js","../../src/pages/theatre/games/index.tsx"],"sourcesContent":["\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z\"\n}), 'ArrowForward');\nexports.default = _default;","import type { HolyPage } from '../../../App';\nimport CommonError from '../../../CommonError';\nimport Meta from '../../../Meta';\nimport type {\n\tCategoryData,\n\tLoadingCategoryData,\n\tLoadingTheatreEntry,\n\tTheatreEntry,\n} from '../../../TheatreCommon';\nimport { ItemList, TheatreAPI } from '../../../TheatreCommon';\nimport SearchBar from '../../../TheatreSearchBar';\nimport { ThemeLink } from '../../../ThemeElements';\nimport { DB_API } from '../../../consts';\nimport categories from '../../../gameCategories';\nimport type { Category, categoryKey } from '../../../gameCategories';\nimport isAbortError from '../../../isAbortError';\nimport { getHot } from '../../../routes';\nimport styles from '../../../styles/TheatreCategory.module.scss';\nimport ArrowForward from '@mui/icons-material/ArrowForward';\nimport clsx from 'clsx';\nimport { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nconst entryLimit = 8;\n\nconst categoryQuery = categories.map((category) => category.id).join(',');\n\nconst PopularMeta = () => (\n\t<Meta title=\"Popular Games\" description=\"Popular games on Holy Unblocker.\" />\n);\n\nconst Popular: HolyPage = () => {\n\tconst { t } = useTranslation(['theatre', 'gameCategory']);\n\n\tconst [data, setData] = useState<CategoryData | null>(null);\n\tconst [error, setError] = useState<string | null>(null);\n\tconst foundData = data || getPopularLoadingCategories();\n\n\tuseEffect(() => {\n\t\tconst abort = new AbortController();\n\n\t\t(async function () {\n\t\t\tconst api = new TheatreAPI(DB_API, abort.signal);\n\n\t\t\ttry {\n\t\t\t\tconst data = await api.category({\n\t\t\t\t\tsort: 'plays',\n\t\t\t\t\tcategory: categoryQuery,\n\t\t\t\t\tlimitPerCategory: entryLimit,\n\t\t\t\t});\n\n\t\t\t\tsetData(data);\n\t\t\t} catch (err) {\n\t\t\t\tif (!isAbortError(err)) {\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t\tsetError(String(err));\n\t\t\t\t}\n\t\t\t}\n\t\t})();\n\n\t\treturn () => abort.abort();\n\t}, []);\n\n\tif (error) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<PopularMeta />\n\t\t\t\t<CommonError\n\t\t\t\t\terror={error}\n\t\t\t\t\tmessage={t('theatre:error.category.popularGames')}\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t}\n\n\tconst _categories: Record<\n\t\tstring,\n\t\t{ entries: (TheatreEntry | LoadingTheatreEntry)[]; category: Category }\n\t> = {};\n\n\tfor (const category of categories)\n\t\t_categories[category.id] = {\n\t\t\tentries: [],\n\t\t\tcategory: category,\n\t\t};\n\n\tfor (const item of foundData.entries)\n\t\t_categories[item.category[0]].entries.push(item);\n\n\treturn (\n\t\t<>\n\t\t\t<PopularMeta />\n\t\t\t<main className={styles.main}>\n\t\t\t\t<SearchBar\n\t\t\t\t\tshowCategory\n\t\t\t\t\tcategory={categoryQuery}\n\t\t\t\t\tplaceholder={t('theatre:searchByGame')}\n\t\t\t\t/>\n\t\t\t\t{Object.values(_categories).map((section) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<section className={styles.expand} key={section.category.id}>\n\t\t\t\t\t\t\t<div className={styles.name}>\n\t\t\t\t\t\t\t\t<h1>\n\t\t\t\t\t\t\t\t\t{t(\n\t\t\t\t\t\t\t\t\t\t`gameCategory:${section.category.id as categoryKey}`,\n\t\t\t\t\t\t\t\t\t).toString()}\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t\t<ThemeLink\n\t\t\t\t\t\t\t\t\tto={`${getHot('theatre games category').path}?id=${\n\t\t\t\t\t\t\t\t\t\tsection.category.id\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\tclassName={styles.seeAll}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t('theatre:seeAll')}\n\t\t\t\t\t\t\t\t\t<ArrowForward />\n\t\t\t\t\t\t\t\t</ThemeLink>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<ItemList\n\t\t\t\t\t\t\t\tclassName={clsx(styles.items, styles.flex)}\n\t\t\t\t\t\t\t\titems={section.entries}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</main>\n\t\t</>\n\t);\n};\n\nexport default Popular;\n\nfunction getPopularLoadingCategories() {\n\tconst loadingCategories: LoadingCategoryData = {\n\t\ttotal: 0,\n\t\tentries: [],\n\t\tloading: true,\n\t};\n\n\tfor (const category of categories)\n\t\tfor (let i = 0; i < entryLimit; i++)\n\t\t\tloadingCategories.entries.push({\n\t\t\t\tid: i.toString(),\n\t\t\t\tloading: true,\n\t\t\t\tcategory: [category.id],\n\t\t\t});\n\n\treturn loadingCategories;\n}\n"],"names":["_interopRequireDefault","require$$0","ArrowForward","default_1","_createSvgIcon","require$$1","_jsxRuntime","require$$2","_default","entryLimit","categoryQuery","categories","category","PopularMeta","jsx","Meta","Popular","useTranslation","data","setData","useState","error","setError","foundData","getPopularLoadingCategories","useEffect","abort","api","TheatreAPI","DB_API","err","isAbortError","jsxs","Fragment","CommonError","_categories","item","styles","SearchBar","section","ThemeLink","getHot","ItemList","clsx","loadingCategories","i"],"mappings":"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","x_google_ignoreList":[0]}