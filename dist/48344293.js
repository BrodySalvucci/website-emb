import{u as N,I as A,r as l,j as a,v as T,w as _,g as b,L as k,t as D,f as S,E as B,F as q}from"./assets/index-25a0d8c7.js";import{T as C}from"./1ed2eb02.js";import{a as E}from"./d3d01167.js";import{d as L}from"./873f084d.js";const $="_search_qgdan_5",F="_ThemeInputBar_qgdan_32",R="_suggested_qgdan_35",M="_option_qgdan_56",P="_hover_qgdan_64",O="_name_qgdan_67",U="_category_qgdan_76",n={search:$,ThemeInputBar:F,suggested:R,option:M,hover:P,name:O,category:U},H=8,Q=({category:x,placeholder:v,showCategory:y})=>{const{t:w}=N("gameCategory"),I=A(),u=l.useRef(null),m=l.useRef(null),[i,j]=l.useState({total:0,entries:[]}),[d,o]=l.useState(-1),[p,c]=l.useState(!1),g=l.useRef(new AbortController);async function h(e){g.current.abort(),g.current=new AbortController;const s=new C(q,g.current.signal);try{const t=await s.category({sort:"search",search:e,limit:H,category:x});j(t)}catch(t){E(t)||console.error(t)}}const f=p&&i.entries.length!==0;return a.jsxs("div",{className:n.search,"data-focused":Number(p),"data-suggested":Number(f),ref:m,onBlur:e=>{m.current.contains(e.relatedTarget)||c(!1)},children:[a.jsxs(T,{className:n.ThemeInputBar,children:[a.jsx(L,{className:_.icon}),a.jsx("input",{ref:u,type:"text",className:_.thinPadLeft,placeholder:v,onFocus:()=>{c(!0),o(-1),h(u.current.value)},onClick:()=>{c(!0),o(-1),h(u.current.value)},onKeyDown:e=>{let s=!0;switch(e.code){case"Escape":c(!1);break;case"ArrowDown":case"ArrowUp":{const t=d;let r;switch(e.code){case"ArrowDown":t>=i.entries.length-1?r=0:r=t+1;break;case"ArrowUp":t<=0?r=i.entries.length-1:r=t-1;break}o(r)}break;case"Enter":{const t=i.entries[d];t&&(u.current.blur(),c(!1),I(`${b("theatre player").path}?id=${t.id}`))}break;default:s=!1;break}s&&e.preventDefault()},onChange:e=>{h(e.target.value),o(-1)}})]}),a.jsx("div",{className:n.suggested,onMouseLeave:()=>{o(-1)},children:f&&i.entries.map((e,s)=>{var t;return a.jsxs(k,{tabIndex:0,onClick:()=>c(!1),onMouseOver:()=>o(s),to:`${b("theatre player").path}?id=${e.id}`,title:e.name,className:D(n.option,s===d&&n.hover),children:[a.jsx("div",{className:n.name,children:a.jsx(S,{ellipsis:!0,children:e.name})}),y&&e.category[0]&&a.jsx("div",{className:n.category,children:w((t=B.find(r=>r.id===e.category[0]))==null?void 0:t.id)})]},e.id)})})]})};export{Q as S};
//# sourceMappingURL=48344293.js.map
