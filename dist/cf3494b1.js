import{u,r as c,b as v,d as f,V as w,B as g,c as h,j as o,e as p,S as l}from"./assets/index-25a0d8c7.js";const j=({compatLayout:s})=>{const{t:e}=u("compat"),a=c.useRef(null),i=v();return c.useEffect(()=>{(async function(){if(!s.current||!a.current)return;let r;try{if(!f)throw r=e("error.swHTTPS"),new Error(r);if(!navigator.serviceWorker)throw r=e("error.swSupport"),new Error(r);r=e("error.generic",{what:"Ultraviolet"}),await a.current.promise,r=void 0;const t=__uv$config;r=e("error.registeringSW"),await navigator.serviceWorker.register(`${w}/uv/sw.js`,{scope:t.prefix,updateViaCache:"none"}),r=void 0,r=e("error.unreachable",{what:"Bare"});{const n=await fetch(g);if(!n.ok)throw await n.json()}r=void 0,globalThis.location.replace(new URL(t.encodeUrl(h(i)),new URL(t.prefix,globalThis.location.toString())))}catch(t){s.current.report(t,r,"Ultraviolet")}})()},[s,i,e]),o.jsxs("main",{children:[o.jsxs(p,{ref:a,children:[o.jsx(l,{src:"/uv/uv.bundle.js"}),o.jsx(l,{src:"/uv/uv.config.js"})]}),e("loading",{what:"Ultraviolet"})]})};export{j as default};
//# sourceMappingURL=cf3494b1.js.map
